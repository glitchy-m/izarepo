<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>School Schedule</title>
  <style>
    body {
      font-family: 'Segoe UI', Arial, sans-serif;
      background-color: #f0f4f8;
      color: #333;
      padding: 2rem;
      line-height: 1.6;
      display: flex;
      flex-direction: column;
      align-items: center;
      min-height: 100vh;
    }

    .container {
        max-width: 800px;
        width: 100%;
        background-color: #fff;
        padding: 2.5rem;
        border-radius: 12px;
        box-shadow: 0 8px 25px rgba(0,0,0,0.1);
        margin-bottom: 2rem;
    }

    h1 {
      text-align: center;
      margin-bottom: 1.5rem;
      font-size: 2.2rem;
      color: #0056b3;
    }

    h3 {
      text-align: center;
      color: #007aff;
      margin-top: 2rem;
      margin-bottom: 1.5rem;
      font-size: 1.4rem;
    }

    .day-picker-container {
      text-align: center;
      margin-bottom: 2rem;
      padding: 1rem;
      background-color: #e6f2ff;
      border-radius: 8px;
    }
    .day-picker-container label {
      display: block;
      margin-bottom: 10px;
      font-weight: 600;
      font-size: 1.1rem;
      color: #0056b3;
    }
    .day-picker-container select {
      padding: 10px 15px;
      border: 2px solid #007aff;
      border-radius: 8px;
      font-size: 1.1rem;
      background-color: #fff;
      cursor: pointer;
      transition: all 0.3s ease;
      -webkit-appearance: none;
      -moz-appearance: none;
      appearance: none;
      background-image: url('data:image/svg+xml;charset=US-ASCII,%3Csvg%20xmlns%3D%22http%3A%2F%2Fwww.w3.org%2F2000%2Fsvg%22%20width%3D%22292.4%22%20height%3D%22292.4%22%3E%3Cpath%20fill%3D%22%23007aff%22%20d%3D%22M287%2C114.7L152.1%2C249.6c-3.2%2C3.2-8.3%2C3.2-11.6%2C0L5.4%2C114.7c-3.2-3.2-3.2-8.3%2C0-11.6l11.6-11.6c3.2-3.2%2C8.3-3.2%2C11.6%2C0l113.8%2C113.8c3.2%2C3.2%2C8.3%2C3.2%2C11.6%2C0l113.8-113.8c3.2-3.2%2C8.3-3.2%2C11.6%2C0l11.6%2C11.6C290.2%2C106.4%2C290.2%2C111.5%2C287%2C114.7z%22%2F%3E%3C%2Fsvg%3E');
      background-repeat: no-repeat;
      background-position: right 15px center;
      background-size: 12px;
      padding-right: 35px;
      min-width: 150px;
    }
    .day-picker-container select:hover {
      border-color: #0056b3;
    }
    .day-picker-container select:focus {
        outline: none;
        box-shadow: 0 0 0 3px rgba(0, 122, 255, 0.3);
    }


    table {
      width: 100%;
      border-collapse: separate;
      border-spacing: 0;
      border: 1px solid #cce0ff;
      background-color: #fff;
      box-shadow: 0 5px 15px rgba(0,0,0,0.08);
      border-radius: 8px;
      overflow: hidden;
    }

    th, td {
      padding: 15px;
      text-align: center;
      border-bottom: 1px solid #eee;
    }

    th {
      background-color: #007aff;
      color: white;
      font-weight: 700;
      text-transform: uppercase;
      font-size: 0.95rem;
    }

    tr:nth-child(even) {
      background-color: #f9f9f9;
    }

    tr:last-child td {
        border-bottom: none;
    }
    th:first-child { border-top-left-radius: 8px; }
    th:last-child { border-top-right-radius: 8px; }
    tr:last-child td:first-child { border-bottom-left-radius: 8px; }
    tr:last-child td:last-child { border-bottom-right-radius: 8px; }
  </style>
</head>
<body>
  <div class="container">
    <h1>School Schedule</h1>

    <div class="day-picker-container">
      <label for="scheduleDayPicker">Select Day:</label>
      <select id="scheduleDayPicker">
        <option value="1">Day 1</option>
        <option value="2">Day 2</option>
        <option value="3">Day 3</option>
        <option value="4">Day 4</option>
        <option value="5">Day 5</option>
        <option value="6">Day 6</option>
      </select>
    </div>

    <h3 id="day-label">Loading Schedule...</h3>
    <table id="schedule-table">
      <thead>
        <tr>
          <th>Time</th>
          <th>Class</th>
          <th>Building</th>
        </tr>
      </thead>
      <tbody id="schedule-body">
        <tr><td colspan="3">Select a day to view its schedule.</td></tr>
      </tbody>
    </table>
  </div>

  <script>
  async function loadScheduleData() {
    try {
      const res = await fetch("schedule.json");
      if (!res.ok) throw new Error(`HTTP error! status: ${res.status}`);
      const data = await res.json();
      return data;
    } catch (err) {
      console.error("Failed to load schedule.json:", err);
      return null;
    }
  }

  async function loadCurrentDayData() {
    try {
      const res = await fetch("current-day.json");
      if (!res.ok) throw new Error(`HTTP error! status: ${res.status}`);
      const data = await res.json();
      if (!("current-day" in data)) throw new Error("Missing 'current-day' in JSON.");
      return data["current-day"];
    } catch (err) {
      console.error("Failed to load current-day.json:", err);
      return null;
    }
  }

  async function renderSchedule(selectedDayNum) {
    const scheduleData = await loadScheduleData();

    const dayLabelElement = document.getElementById("day-label");
    const tableBody = document.getElementById("schedule-body");
    tableBody.innerHTML = "";

    if (!scheduleData) {
      dayLabelElement.textContent = "Error loading schedule data.";
      const row = document.createElement("tr");
      row.innerHTML = `<td colspan="3">Could not load schedule.</td>`;
      tableBody.appendChild(row);
      return;
    }

    const dayKey = `day${selectedDayNum}`;
    const todaysSchedule = scheduleData.schedule?.[dayKey];

    if (!Array.isArray(todaysSchedule) || todaysSchedule.length === 0) {
      dayLabelElement.textContent = `No schedule found for Day ${selectedDayNum}.`;
      const row = document.createElement("tr");
      row.innerHTML = `<td colspan="3">No classes scheduled for this day.</td>`;
      tableBody.appendChild(row);
      return;
    }

    dayLabelElement.textContent = `Schedule for Day ${selectedDayNum}:`;

    for (const cls of todaysSchedule) {
      const row = document.createElement("tr");
      row.innerHTML = `
        <td>${cls.time}</td>
        <td>${cls.class}</td>
        <td>${cls.building}</td>
      `;
      tableBody.appendChild(row);
    }
  }

  // Initialize on page load
  window.onload = async () => {
    const dayPicker = document.getElementById("scheduleDayPicker");
    const currentDayFromJSON = await loadCurrentDayData();

    if (currentDayFromJSON) {
        dayPicker.value = currentDayFromJSON;
    } else {
        dayPicker.value = "1";
    }

    renderSchedule(dayPicker.value);

    dayPicker.addEventListener("change", (event) => {
      renderSchedule(event.target.value);
    });
  };
  </script>
</body>
</html>
